# Juno

Juno makes it easy to define Argo Workflows with Typescript.

<img src=docs/assets/juno-logo.jpg width="20%" alt="Juno mascot">


###  Juno - Stats
[![Pre-Commit Hooks](https://github.com/lumindigital/juno/actions/workflows/pre-commit.yml/badge.svg)](https://github.com/lumindigital/juno/actions/workflows/pre-commit.yml)

[![Dependabot Updates](https://github.com/lumindigital/juno/actions/workflows/dependabot/dependabot-updates/badge.svg)](https://github.com/lumindigital/juno/actions/workflows/dependabot/dependabot-updates)


### Getting Started
This project is packaged with npm. In order to use this project, create a new typescript project and import this package.


Use the following tsconfig in your project
```json
{
    "compilerOptions": {
      "declaration": false,
      "module": "Node16",
      "outDir": "dist",
      "rootDir": "src",
      "strict": true,
      "target": "es2022",
      "moduleResolution": "node16",
      "composite": false,
    },
    "include": ["./src/**/*"],
    "ts-node": {
      "esm": true
    }
  }
```

Each file that generates a workflow must have a default function exported. The return type T must be a valid Workflow interface that is a k8's manifest. See the examples in this project for a reference.

```typescript
export async function generateTemplate(): Promise<T> {}
```

You will need to compile your workflow into js before running the cli against it. You can nest workflows in folders and that structure will be duplicated outside the workflow

Run the following command to generate your workflows with the cli

```bash
./node_modules/.bin/juno generate -i ~/projects/juno-workflows/dist -o "./output"
```

Note: You must use the full path to the input folder, or the CLI will break!


### Installation and Setup
If you need to make changes to this project

1. Clone Repository
2. Run `npm i`
3. Run `npm run build`

You can run the tests via `npm run test`.

To run the cli from this project you can use the following
```
./bin/dev.js generate
./bin/run.js generate
```


### Pre-commit Installation and Setup

This repository uses `pre-commit` hooks to ensure code quality and consistency.
`Pre-commit` is a framework for managing and maintaining multi-language `pre-commit` hooks.
It allows you to automatically run linters, formatters, and other tools before committing code.
To install the hooks, run the following command:

```bash
pre-commit install
```

### Dependabot

This repository uses `Dependabot` to keep dependencies up-to-date.
`Dependabot` is a tool that automatically creates pull requests to update dependencies in your project.
To learn more about `Dependabot`, visit the [official documentation](https://docs.github.com/en/code-security/dependabot).

The configuration can be found at: `.github/dependabot.yml`

`Dependabot` will check for updates on a `daily` basis.
Configuration for `Dependabot` is generated by `lumin-stencil` based on the "Node" `Lumin Flavor` and additional settings.
Ecosystems currently monitored in this repository by `Dependabot`:

- npm
- github-actions

### Regenerating Interfaces

In order to regenerate the workflow-interfaces you need to do the following
2. Clone the argo-workflows project
3. Switch to the release branch you wish to generate from
4. Run the npm command `npm interfaces`
